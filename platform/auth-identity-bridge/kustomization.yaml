# Auth Identity Bridge: Kagenti webhook-based sidecar injection
#
# The kagenti-webhook automatically injects AIB sidecars (proxy-init, spiffe-helper,
# client-registration, envoy-proxy) into pods with the label kagenti.io/inject: enabled.
#
# This directory provides:
#   - AgentCard CR: tells the operator which Deployment backs this agent
#   - SCC: OpenShift SecurityContextConstraints for webhook-injected sidecars
#     (NET_ADMIN/NET_RAW for proxy-init iptables, CSI for SPIRE agent socket)
#
# Prerequisites:
#   - kagenti-webhook deployed on the cluster
#   - SPIRE server + agent running (spire-system namespace)
#   - Keycloak with realm configured (managed by Kagenti operator)
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: openclaw
resources:
- openclaw-agentcard.yaml
- openclaw-scc.yaml
